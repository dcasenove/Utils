cmake_minimum_required(VERSION 2.6)
set(CMAKE_CXX_STANDARD 11)
project(radiotap)
add_definitions("-D_BSD_SOURCE -DRADIOTAP_SUPPORT_OVERRIDES -D_DEFAULT_SOURCE")
include_directories(/usr/local/include/)
add_library(radiotap SHARED radiotap.c)
add_library(ArpScanner SHARED ArpScanner.cpp)
add_library(Device SHARED Device.cpp)
add_library(RadiotapScanner SHARED RadiotapScanner.cpp)
add_library(Pinger SHARED Pinger.cpp)
set_target_properties(radiotap PROPERTIES COMPILE_FLAGS "-Wall -Wextra -g")
set_target_properties(ArpScanner PROPERTIES COMPILE_FLAGS "-Wall -Wextra -g -lpcap -ldumbnet")
set_target_properties(Device PROPERTIES COMPILE_FLAGS "-Wall -Wextra -g")
set_target_properties(RadiotapScanner PROPERTIES COMPILE_FLAGS "-Wall -Wextra -g -lpcap")
set_target_properties(Pinger PROPERTIES COMPILE_FLAGS "-Wall -g -Wextra")
target_link_libraries(ArpScanner pcap dumbnet)
target_link_libraries(RadiotapScanner radiotap pcap Device)
install(TARGETS ArpScanner DESTINATION lib)
install(TARGETS radiotap DESTINATION lib)
install(TARGETS Device DESTINATION lib)
install(TARGETS RadiotapScanner DESTINATION lib)
install(TARGETS Pinger DESTINATION lib)
install(FILES radiotap.h radiotap_iter.h ArpScanner.h Device.h RadiotapScanner.h Pinger.h DESTINATION include)

add_executable(pcap_radiotap pcap_radiotap.cpp)
set_target_properties(pcap_radiotap PROPERTIES
                      COMPILE_FLAGS " -v -Wall -Wextra -g -lpcap -ldumbnet")
          target_link_libraries(pcap_radiotap radiotap ArpScanner Device RadiotapScanner Pinger pcap dumbnet)
